<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediLLM - Distributed Medical Language Model</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --primary: #2c6fb0;
            --primary-dark: #1d4e7a;
            --secondary: #5bb895;
            --secondary-dark: #409975;
            --accent: #f0a04b;
            --dark: #2c3e50;
            --light: #ecf0f1;
            --danger: #e74c3c;
            --success: #2ecc71;
            --warning: #f39c12;
            --info: #3498db;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f9fc;
            color: #333;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 0;
            border-bottom: 1px solid #e1e8ed;
            margin-bottom: 30px;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            color: var(--primary);
            font-size: 24px;
            font-weight: bold;
        }

        .logo-icon {
            font-size: 28px;
            color: var(--primary);
        }

        .main-nav ul {
            display: flex;
            gap: 20px;
            list-style: none;
        }

        .main-nav a {
            text-decoration: none;
            color: var(--dark);
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        .main-nav a:hover {
            background-color: rgba(44, 111, 176, 0.1);
            color: var(--primary);
        }

        .main-nav a.active {
            background-color: var(--primary);
            color: white;
        }

        main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .dashboard {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 30px;
        }

        @media (max-width: 768px) {
            .dashboard {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            height: 100%;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.1);
        }

        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid #f0f0f0;
        }

        .card-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--primary);
        }

        .card-body {
            color: #555;
        }

        .panel {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
            overflow: hidden;
        }

        .panel-header {
            background-color: var(--primary);
            color: white;
            padding: 15px 20px;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .panel-body {
            padding: 20px;
        }

        .tab-nav {
            display: flex;
            background-color: #f8f9fa;
            border-bottom: 1px solid #e1e8ed;
        }

        .tab-nav button {
            padding: 15px 20px;
            background: none;
            border: none;
            font-size: 16px;
            font-weight: 500;
            color: #646f7c;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .tab-nav button.active {
            color: var(--primary);
            background-color: white;
        }

        .tab-nav button.active::after {
            content: "";
            position: absolute;
            bottom: -1px;
            left: 0;
            right: 0;
            height: 3px;
            background-color: var(--primary);
        }

        .tab-content {
            display: none;
            padding: 20px;
        }

        .tab-content.active {
            display: block;
        }

        .btn {
            padding: 10px 16px;
            border-radius: 4px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
        }

        .btn-primary {
            background-color: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-dark);
        }

        .btn-secondary {
            background-color: var(--secondary);
            color: white;
        }

        .btn-secondary:hover {
            background-color: var(--secondary-dark);
        }

        .btn-accent {
            background-color: var(--accent);
            color: white;
        }

        .btn-accent:hover {
            background-color: #d88c30;
        }

        .btn-outline {
            background-color: transparent;
            border: 1px solid var(--primary);
            color: var(--primary);
        }

        .btn-outline:hover {
            background-color: var(--primary);
            color: white;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }

        .form-control {
            width: 100%;
            padding: 12px;
            border: 1px solid #dce0e5;
            border-radius: 4px;
            font-size: 16px;
            transition: border-color 0.3s ease, box-shadow 0.3s ease;
        }

        .form-control:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(44, 111, 176, 0.2);
            outline: none;
        }

        textarea.form-control {
            min-height: 120px;
            resize: vertical;
        }

        .status-badge {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
        }

        .status-online {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--success);
        }

        .status-training {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning);
        }

        .status-offline {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger);
        }

        .client-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .client-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            display: flex;
            flex-direction: column;
        }

        .client-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .client-name {
            font-weight: 600;
            color: var(--dark);
        }

        .client-details {
            margin-top: 15px;
            font-size: 14px;
            color: #666;
        }

        .client-details div {
            margin-bottom: 6px;
            display: flex;
            justify-content: space-between;
        }

        .client-details span:first-child {
            font-weight: 500;
            color: #555;
        }

        .progress-container {
            margin-top: 10px;
            width: 100%;
            height: 8px;
            background-color: #f0f0f0;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress-bar {
            height: 100%;
            background-color: var(--primary);
            border-radius: 4px;
            transition: width 0.3s ease;
        }

        .chat-container {
            display: flex;
            flex-direction: column;
            height: 500px;
            border: 1px solid #dce0e5;
            border-radius: 8px;
            overflow: hidden;
        }

        .chat-messages {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background-color: #f9f9f9;
        }

        .message {
            margin-bottom: 20px;
            max-width: 80%;
        }

        .message-user {
            margin-left: auto;
        }

        .message-ai {
            margin-right: auto;
        }

        .message-content {
            padding: 12px 16px;
            border-radius: 8px;
            position: relative;
            line-height: 1.5;
        }

        .message-user .message-content {
            background-color: var(--primary);
            color: white;
            border-top-right-radius: 0;
        }

        .message-ai .message-content {
            background-color: white;
            border: 1px solid #e1e8ed;
            border-top-left-radius: 0;
        }

        .message-meta {
            font-size: 12px;
            margin-top: 5px;
            color: #888;
        }

        .chat-input {
            display: flex;
            padding: 15px;
            background-color: white;
            border-top: 1px solid #e1e8ed;
        }

        .chat-input input {
            flex: 1;
            padding: 12px 16px;
            border: 1px solid #dce0e5;
            border-radius: 4px;
            font-size: 16px;
        }

        .chat-input button {
            margin-left: 10px;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .metric-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            padding: 20px;
            text-align: center;
        }

        .metric-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--primary);
            margin: 10px 0;
        }

        .metric-label {
            color: #666;
            font-size: 14px;
        }

        .logs-container {
            background-color: #272c34;
            color: #b9c1cb;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Consolas', 'Monaco', monospace;
            overflow-y: auto;
            height: 300px;
            margin-top: 20px;
        }

        .log-entry {
            padding: 3px 0;
            border-bottom: 1px solid #3a3f4b;
            font-size: 14px;
        }

        .log-time {
            color: #888;
            margin-right: 10px;
        }

        .log-info {
            color: #3498db;
        }

        .log-warn {
            color: #f39c12;
        }

        .log-error {
            color: #e74c3c;
        }

        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-top: 15px;
        }

        .suggestion {
            padding: 8px 12px;
            background-color: #f8f9fa;
            border: 1px solid #e1e8ed;
            border-radius: 20px;
            font-size: 14px;
            color: #555;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .suggestion:hover {
            background-color: #e8f4ff;
            border-color: var(--primary);
            color: var(--primary);
        }

        .chart-container {
            margin-top: 20px;
            height: 300px;
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }

        footer {
            margin-top: auto;
            padding: 20px 0;
            border-top: 1px solid #e1e8ed;
            text-align: center;
            color: #888;
            font-size: 14px;
        }

        .system-status {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .pulse {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background-color: var(--success);
            margin-right: 6px;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% {
                transform: scale(0.95);
                opacity: 0.8;
            }
            50% {
                transform: scale(1);
                opacity: 1;
            }
            100% {
                transform: scale(0.95);
                opacity: 0.8;
            }
        }

        .tooltip {
            position: relative;
            display: inline-block;
            cursor: help;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: #333;
            color: #fff;
            text-align: center;
            border-radius: 6px;
            padding: 5px;
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: opacity 0.3s;
            font-size: 14px;
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Animation for training simulation */
        @keyframes progress {
            0% { width: 0; }
            100% { width: 100%; }
        }

        .loading {
            animation: progress 30s linear forwards;
        }

        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            padding: 15px 20px;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15);
            transform: translateX(120%);
            transition: transform 0.3s ease;
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification-icon {
            font-size: 20px;
        }

        .notification-success .notification-icon {
            color: var(--success);
        }

        .notification-error .notification-icon {
            color: var(--danger);
        }

        .notification-warning .notification-icon {
            color: var(--warning);
        }

        .notification-content {
            flex: 1;
        }

        .notification-title {
            font-weight: 600;
            margin-bottom: 3px;
        }

        .notification-message {
            color: #666;
            font-size: 14px;
        }

        .notification-close {
            color: #aaa;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 18px;
            transition: color 0.2s ease;
        }

        .notification-close:hover {
            color: #666;
        }

        .sample-questions {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 12px;
        }

        .sample-question {
            padding: 12px 16px;
            background-color: #f8f9fa;
            border: 1px solid #e1e8ed;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .sample-question:hover {
            background-color: #e8f4ff;
            border-color: var(--primary);
            color: var(--primary);
        }

        .chat-thinking {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #888;
            font-style: italic;
            margin-top: 10px;
        }

        .thinking-dots {
            display: flex;
        }

        .thinking-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: #888;
            margin: 0 2px;
            opacity: 0.6;
        }

        .thinking-dot:nth-child(1) {
            animation: dot-flashing 1s infinite alternate 0s;
        }

        .thinking-dot:nth-child(2) {
            animation: dot-flashing 1s infinite 0.2s;
        }

        .thinking-dot:nth-child(3) {
            animation: dot-flashing 1s infinite 0.4s;
        }

        @keyframes dot-flashing {
            0% { opacity: 0.3; }
            50%, 100% { opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="logo">
                <i class="fas fa-brain logo-icon"></i>
                <span>MediLLM</span>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="#" class="active" id="nav-dashboard">Dashboard</a></li>
                    <li><a href="#" id="nav-train">Training</a></li>
                    <li><a href="#" id="nav-inference">Medical Q&A</a></li>
                    <li><a href="#" id="nav-status">System Status</a></li>
                </ul>
            </nav>
        </header>

        <main>
            <!-- Dashboard View -->
            <div id="view-dashboard" class="view active">
                <h1>Distributed Medical LLM Dashboard</h1>
                <p class="subtitle">Real-time overview of your distributed medical language model system</p>

                <div class="system-status">
                    <div class="status-badge status-online">
                        <span class="pulse"></span>
                        System Online
                    </div>
                    <div class="status-badge status-online">
                        <span class="pulse"></span>
                        2/2 Clients Connected
                    </div>
                    <div class="status-badge status-online">
                        <span class="pulse"></span>
                        Model Ready
                    </div>
                </div>

                <div class="dashboard">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-server"></i> System Health</h3>
                            <button class="btn btn-outline btn-sm" id="refresh-status">
                                <i class="fas fa-sync-alt"></i> Refresh
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <div class="metric-label">CPU Usage</div>
                                    <div class="metric-value">24%</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">GPU Memory</div>
                                    <div class="metric-value">3.1 GB</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">Active Clients</div>
                                    <div class="metric-value">2</div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">Uptime</div>
                                    <div class="metric-value">1:32:45</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-chart-line"></i> Recent Performance</h3>
                        </div>
                        <div class="card-body">
                            <div class="chart-container">
                                <canvas id="performance-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <h3>Quick Actions</h3>
                    </div>
                    <div class="panel-body">
                        <div style="display: flex; gap: 15px;">
                            <button class="btn btn-primary" id="start-training-btn">
                                <i class="fas fa-play"></i> Start Training
                            </button>
                            <button class="btn btn-secondary" id="start-inference-btn">
                                <i class="fas fa-comment-medical"></i> Medical Q&A
                            </button>
                            <button class="btn btn-outline" id="system-logs-btn">
                                <i class="fas fa-list"></i> View System Logs
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Training View -->
            <div id="view-training" class="view">
                <h1>Distributed Training</h1>
                <p class="subtitle">Train your medical language model across multiple clients</p>

                <div class="panel">
                    <div class="panel-header">
                        <h3>Training Configuration</h3>
                    </div>
                    <div class="panel-body">
                        <form id="training-form">
                            <div class="form-group">
                                <label for="model-select">Base Model</label>
                                <select id="model-select" class="form-control">
                                    <option value="facebook/opt-1.3b">facebook/opt-1.3b</option>
                                    <option value="distilgpt2">distilgpt2 (Smaller)</option>
                                    <option value="tiny-gpt2">tiny-gpt2 (Tiny)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="dataset-select">Medical Dataset</label>
                                <select id="dataset-select" class="form-control">
                                    <option value="medical_qa">Medical Q&A (16,407 examples)</option>
                                    <option value="disease_symptoms">Disease Symptoms (8,245 examples)</option>
                                    <option value="drug_interactions">Drug Interactions (5,129 examples)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="epochs">Training Epochs</label>
                                <input type="number" id="epochs" class="form-control" min="1" max="10" value="3">
                            </div>
                            <div class="form-group">
                                <label for="batch-size">Batch Size</label>
                                <select id="batch-size" class="form-control">
                                    <option value="1">1 (Minimum memory usage)</option>
                                    <option value="2">2 (Low memory usage)</option>
                                    <option value="4">4 (Medium memory usage)</option>
                                    <option value="8">8 (High memory usage)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label for="learning-rate">Learning Rate</label>
                                <input type="number" id="learning-rate" class="form-control" step="0.0001" min="0.0001" max="0.01" value="0.0002">
                            </div>
                            <button type="submit" class="btn btn-primary" id="start-training-submit">
                                <i class="fas fa-play"></i> Start Training
                            </button>
                        </form>
                    </div>
                </div>

                <div class="panel" id="training-progress-panel" style="display: none;">
                    <div class="panel-header">
                        <h3>Training Progress</h3>
                        <div class="status-badge status-training">
                            <i class="fas fa-spinner fa-spin"></i> Training in Progress
                        </div>
                    </div>
                    <div class="panel-body">
                        <div class="client-grid" id="client-grid">
                            <!-- Client cards will be generated here -->
                        </div>

                        <h4 style="margin-top: 30px;">Training Logs</h4>
                        <div class="logs-container" id="training-logs">
                            <!-- Training logs will be displayed here -->
                        </div>
                    </div>
                </div>
            </div>

            <!-- Inference (Medical Q&A) View -->
            <div id="view-inference" class="view">
                <h1>Medical Question Answering</h1>
                <p class="subtitle">Ask medical questions to your trained distributed model</p>

                <div class="panel">
                    <div class="chat-container">
                        <div class="chat-messages" id="chat-messages">
                            <div class="message message-ai">
                                <div class="message-content">
                                    Hello! I'm your medical AI assistant. I've been trained on a dataset of medical information. How can I help you today?
                                </div>
                                <div class="message-meta">AI Assistant • Just now</div>
                            </div>
                        </div>
                        <div class="chat-input">
                            <input type="text" id="chat-input" placeholder="Type your medical question here..." class="form-control">
                            <button class="btn btn-primary" id="send-message">
                                <i class="fas fa-paper-plane"></i> Send
                            </button>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <h3>Sample Medical Questions</h3>
                    </div>
                    <div class="panel-body">
                        <div class="sample-questions" id="sample-questions">
                            <div class="sample-question">What is diabetes?</div>
                            <div class="sample-question">What are the symptoms of a heart attack?</div>
                            <div class="sample-question">How does the COVID-19 vaccine work?</div>
                            <div class="sample-question">What causes high blood pressure?</div>
                            <div class="sample-question">What is the treatment for strep throat?</div>
                            <div class="sample-question">What is cancer and how does it develop?</div>
                            <div class="sample-question">How do antibiotics work?</div>
                            <div class="sample-question">What is Alzheimer's disease?</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- System Status View -->
            <div id="view-status" class="view">
                <h1>System Status</h1>
                <p class="subtitle">Monitor the health and performance of your distributed system</p>

                <div class="dashboard">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-microchip"></i> Resources</h3>
                        </div>
                        <div class="card-body">
                            <div class="metrics-grid">
                                <div class="metric-card">
                                    <div class="metric-label">CPU Usage</div>
                                    <div class="metric-value">24%</div>
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 24%"></div>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">RAM Usage</div>
                                    <div class="metric-value">4.2 GB</div>
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 42%"></div>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">GPU Memory</div>
                                    <div class="metric-value">3.1 GB</div>
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 78%"></div>
                                    </div>
                                </div>
                                <div class="metric-card">
                                    <div class="metric-label">Network</div>
                                    <div class="metric-value">8.4 MB/s</div>
                                    <div class="progress-container">
                                        <div class="progress-bar" style="width: 28%"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title"><i class="fas fa-network-wired"></i> Clients</h3>
                        </div>
                        <div class="card-body">
                            <div class="client-grid">
                                <div class="client-card">
                                    <div class="client-header">
                                        <div class="client-name">Client 1 (192.168.1.101)</div>
                                        <div class="status-badge status-online">
                                            <span class="pulse"></span> Online
                                        </div>
                                    </div>
                                    <div class="client-details">
                                        <div>
                                            <span>GPU:</span>
                                            <span>NVIDIA GTX 1650</span>
                                        </div>
                                        <div>
                                            <span>Memory:</span>
                                            <span>3.2 GB / 4 GB</span>
                                        </div>
                                        <div>
                                            <span>Status:</span>
                                            <span>Idle</span>
                                        </div>
                                        <div>
                                            <span>Last Activity:</span>
                                            <span>2 minutes ago</span>
                                        </div>
                                    </div>
                                </div>

                                <div class="client-card">
                                    <div class="client-header">
                                        <div class="client-name">Client 2 (192.168.1.102)</div>
                                        <div class="status-badge status-online">
                                            <span class="pulse"></span> Online
                                        </div>
                                    </div>
                                    <div class="client-details">
                                        <div>
                                            <span>GPU:</span>
                                            <span>NVIDIA RTX 3060</span>
                                        </div>
                                        <div>
                                            <span>Memory:</span>
                                            <span>2.8 GB / 6 GB</span>
                                        </div>
                                        <div>
                                            <span>Status:</span>
                                            <span>Idle</span>
                                        </div>
                                        <div>
                                            <span>Last Activity:</span>
                                            <span>2 minutes ago</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="panel">
                    <div class="panel-header">
                        <h3>System Logs</h3>
                        <button class="btn btn-outline btn-sm" id="clear-logs">
                            <i class="fas fa-trash"></i> Clear
                        </button>
                    </div>
                    <div class="panel-body">
                        <div class="logs-container" id="system-logs">
                            <div class="log-entry">
                                <span class="log-time">10:34:44</span>
                                <span class="log-info">INFO</span> Server initialized with model facebook/opt-1.3b
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:44</span>
                                <span class="log-info">INFO</span> Clients: 192.168.1.101, 192.168.1.102
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:44</span>
                                <span class="log-info">INFO</span> Loading tokenizer for facebook/opt-1.3b
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> Preparing to distribute model to clients...
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> Sending setup info to client 1
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> Sending setup info to client 2
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> Sending CSV file to clients: data/medical_qa.csv
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> CSV file size: 3.42 MB
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> CSV file sent to all clients
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:45</span>
                                <span class="log-info">INFO</span> Waiting for clients to load models...
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:47</span>
                                <span class="log-info">INFO</span> Client 2 is ready (1/2)
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:54</span>
                                <span class="log-info">INFO</span> Client 1 is ready (2/2)
                            </div>
                            <div class="log-entry">
                                <span class="log-time">10:34:54</span>
                                <span class="log-info">INFO</span> All clients ready and waiting for commands
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <footer>
            <p>MediLLM - Distributed Medical Language Model System © 2025</p>
        </footer>

        <!-- Notification Component -->
        <div class="notification" id="notification">
            <div class="notification-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="notification-content">
                <div class="notification-title">Success</div>
                <div class="notification-message">Operation completed successfully.</div>
            </div>
            <button class="notification-close">&times;</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.1/chart.min.js"></script>
    <script>
        // Pre-built medical QA dataset for demo
        const MEDICAL_QA = {
            "What is diabetes?": "Diabetes is a chronic condition where the body either doesn't produce enough insulin or cannot effectively use the insulin it produces, resulting in elevated blood sugar levels. There are two main types: Type 1 diabetes (where the body doesn't produce insulin) and Type 2 diabetes (where the body becomes resistant to insulin).",
            
            "What are the symptoms of a heart attack?": "Common symptoms of a heart attack include chest pain or discomfort, shortness of breath, pain or discomfort in the jaw, neck, back, arm, or shoulder, and feeling nauseous, light-headed, or unusually tired. Women may experience different symptoms than men, such as more subtle chest pain and more pronounced fatigue and shortness of breath.",
            
            "How does the COVID-19 vaccine work?": "COVID-19 vaccines work by instructing our cells to produce a harmless piece of the virus (like the spike protein), triggering an immune response. This creates antibodies and memory cells that will recognize and fight the actual virus if encountered in the future. Different vaccines use different mechanisms (mRNA, viral vector, etc.) but all aim to build immunity without causing disease.",
            
            "What causes high blood pressure?": "High blood pressure can be caused by multiple factors including unhealthy lifestyle choices (like poor diet, lack of exercise, excessive salt intake, alcohol consumption, and smoking), genetic factors, underlying medical conditions (like kidney disease or thyroid disorders), certain medications, stress, and advancing age.",
            
            "What is the treatment for strep throat?": "Strep throat is typically treated with antibiotics, most commonly penicillin or amoxicillin. These help reduce the duration and severity of symptoms, prevent complications, and reduce transmission to others. Supportive care includes rest, hydration, gargling with saltwater, and using over-the-counter pain relievers for fever and throat pain.",
            
            "What is cancer and how does it develop?": "Cancer is a disease characterized by abnormal cell growth that can invade and spread to other parts of the body. It develops when genetic mutations affect cells' ability to control growth and division. These mutations may be inherited, caused by environmental factors, or occur spontaneously during cell replication. As mutations accumulate, cells can become increasingly abnormal, potentially leading to malignant tumors.",
            
            "How do antibiotics work?": "Antibiotics work by targeting structures or processes that are essential for bacterial survival but not found in human cells. Some antibiotics disrupt the bacterial cell wall synthesis, others interfere with protein synthesis, DNA replication, or other vital cellular processes. This selectivity allows antibiotics to kill or inhibit bacteria without harming human cells.",
            
            "What is Alzheimer's disease?": "Alzheimer's disease is a progressive neurological disorder that causes brain cells to degenerate and die, leading to a decline in cognitive function and memory. It's characterized by abnormal protein deposits in the brain (amyloid plaques and tau tangles), which disrupt communication between neurons and eventually cause cell death. As the disease progresses, brain tissue shrinks significantly.",
            
            "What causes allergies?": "Allergies occur when your immune system reacts to a foreign substance (allergen) that's typically harmless to most people. When first exposed to an allergen, the immune system produces antibodies that identify the particular allergen as harmful, even though it isn't. Upon subsequent exposure, these antibodies signal the immune system to release chemicals like histamine, causing allergy symptoms.",
            
            "How does vaccination provide immunity?": "Vaccination provides immunity by introducing a safe, modified version of a pathogen (or parts of it) to the body. This stimulates the immune system to produce antibodies and memory cells specific to that pathogen, without causing the actual disease. When the real pathogen is encountered later, the immune system recognizes it and mounts a rapid, effective response, preventing infection or reducing its severity."
        };

        // Additional questions for variety
        const GENERAL_QUESTIONS = [
            "What is a virus?",
            "How does chemotherapy work?",
            "What are the symptoms of appendicitis?",
            "How does insulin regulate blood sugar?",
            "What causes migraines?",
            "What is the function of antibodies?",
            "How do vaccines prevent disease?",
            "What is the difference between a bacterial and viral infection?",
            "How does blood pressure work?",
            "What is the purpose of cholesterol in the body?"
        ];

        // Generic answers for questions not in our dataset
        const GENERIC_ANSWERS = [
            "Based on medical literature, this condition involves complex interactions between genetic and environmental factors. Treatment typically follows a multifaceted approach focusing on symptom management and addressing underlying causes when possible.",
            
            "According to recent medical research, this involves a cascade of physiological responses regulated by multiple body systems. Healthcare providers typically diagnose this through a combination of patient history, physical examination, and laboratory tests.",
            
            "Medical consensus indicates this is a multifactorial process with both modifiable and non-modifiable risk factors. Prevention strategies focus on lifestyle modifications while treatment approaches are tailored to individual patient characteristics.",
            
            "Current medical guidelines recommend a stepwise approach to management, beginning with non-pharmacological interventions before considering medication. Patient education plays a crucial role in successful outcomes.",
            
            "The pathophysiology involves complex interactions between various biological systems. Early detection is key to improving outcomes, and treatment approaches continue to evolve as new research emerges."
        ];

        // DOM elements
        const navLinks = document.querySelectorAll('.main-nav a');
        const views = document.querySelectorAll('.view');
        const chatInput = document.getElementById('chat-input');
        const sendMessageBtn = document.getElementById('send-message');
        const chatMessages = document.getElementById('chat-messages');
        const startTrainingBtn = document.getElementById('start-training-btn');
        const startTrainingSubmit = document.getElementById('start-training-submit');
        const startInferenceBtn = document.getElementById('start-inference-btn');
        const sampleQuestions = document.getElementById('sample-questions');
        const trainingForm = document.getElementById('training-form');
        const trainingProgressPanel = document.getElementById('training-progress-panel');
        const clientGrid = document.getElementById('client-grid');
        const trainingLogs = document.getElementById('training-logs');
        const systemLogs = document.getElementById('system-logs');
        const notification = document.getElementById('notification');
        const notificationClose = document.querySelector('.notification-close');

        // Initialize performance chart
        const ctx = document.getElementById('performance-chart').getContext('2d');
        const performanceChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Day 1', 'Day 2', 'Day 3', 'Day 4', 'Day 5', 'Day 6', 'Day 7'],
                datasets: [
                    {
                        label: 'Accuracy',
                        data: [78, 82, 85, 89, 92, 93, 95],
                        borderColor: '#2c6fb0',
                        backgroundColor: 'rgba(44, 111, 176, 0.1)',
                        tension: 0.3,
                        fill: true
                    },
                    {
                        label: 'Loss',
                        data: [2.1, 1.8, 1.5, 1.2, 0.9, 0.7, 0.5],
                        borderColor: '#e74c3c',
                        backgroundColor: 'rgba(231, 76, 60, 0.1)',
                        tension: 0.3,
                        fill: true
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'top',
                    },
                    title: {
                        display: true,
                        text: 'Model Performance Metrics'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });

        // Navigation
        navLinks.forEach(link => {
            link.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all links and add to clicked link
                navLinks.forEach(l => l.classList.remove('active'));
                this.classList.add('active');
                
                // Get the view to show
                const viewId = this.id.replace('nav-', 'view-');
                
                // Hide all views
                views.forEach(view => view.classList.remove('active'));
                
                // Show the selected view
                document.getElementById(viewId).classList.add('active');
            });
        });

        // Quick action buttons
        startTrainingBtn.addEventListener('click', function() {
            document.getElementById('nav-train').click();
        });

        startInferenceBtn.addEventListener('click', function() {
            document.getElementById('nav-inference').click();
        });

        // Handle chat functionality
        function sendMessage() {
            const messageText = chatInput.value.trim();
            if (messageText === '') return;
            
            // Add user message to chat
            addMessageToChat(messageText, 'user');
            
            // Clear input
            chatInput.value = '';
            
            // Show thinking indicator
            const thinkingEl = document.createElement('div');
            thinkingEl.className = 'chat-thinking';
            thinkingEl.innerHTML = `
                <span>AI is thinking</span>
                <div class="thinking-dots">
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                    <div class="thinking-dot"></div>
                </div>
            `;
            chatMessages.appendChild(thinkingEl);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Simulate AI response after a delay
            setTimeout(() => {
                // Remove thinking indicator
                chatMessages.removeChild(thinkingEl);
                
                // Generate response
                let response;
                if (messageText in MEDICAL_QA) {
                    response = MEDICAL_QA[messageText];
                } else {
                    // Check for similar questions (case-insensitive)
                    let found = false;
                    for (const [q, a] of Object.entries(MEDICAL_QA)) {
                        if (messageText.toLowerCase().includes(q.toLowerCase()) || 
                            q.toLowerCase().includes(messageText.toLowerCase())) {
                            response = a;
                            found = true;
                            break;
                        }
                    }
                    
                    if (!found) {
                        // Generate a generic answer
                        response = GENERIC_ANSWERS[Math.floor(Math.random() * GENERIC_ANSWERS.length)];
                    }
                }
                
                // Add AI response to chat
                addMessageToChat(response, 'ai');
            }, 1500);
        }

        function addMessageToChat(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message message-${sender}`;
            
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}`;
            
            messageDiv.innerHTML = `
                <div class="message-content">${text}</div>
                <div class="message-meta">${sender === 'user' ? 'You' : 'AI Assistant'} • ${timeString}</div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        sendMessageBtn.addEventListener('click', sendMessage);
        
        chatInput.addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendMessage();
            }
        });

        // Sample questions
        sampleQuestions.addEventListener('click', function(e) {
            if (e.target.classList.contains('sample-question')) {
                const question = e.target.textContent;
                chatInput.value = question;
                sendMessage();
            }
        });

        // Training simulation
        function simulateTraining() {
            // Hide form, show progress
            trainingForm.style.display = 'none';
            trainingProgressPanel.style.display = 'block';
            
            // Create client cards
            const model = document.getElementById('model-select').value;
            const dataset = document.getElementById('dataset-select').value;
            const epochs = document.getElementById('epochs').value;
            
            clientGrid.innerHTML = '';
            
            // Create client cards
            for (let i = 1; i <= 2; i++) {
                const clientCard = document.createElement('div');
                clientCard.className = 'client-card';
                clientCard.innerHTML = `
                    <div class="client-header">
                        <div class="client-name">Client ${i} (192.168.1.${100+i})</div>
                        <div class="status-badge status-training">
                            <i class="fas fa-spinner fa-spin"></i> Training
                        </div>
                    </div>
                    <div class="client-details">
                        <div>
                            <span>GPU:</span>
                            <span>${i === 1 ? 'NVIDIA GTX 1650' : 'NVIDIA RTX 3060'}</span>
                        </div>
                        <div>
                            <span>Batch Size:</span>
                            <span>${document.getElementById('batch-size').value}</span>
                        </div>
                        <div>
                            <span>Progress:</span>
                            <span>Epoch 1/${epochs}</span>
                        </div>
                    </div>
                    <div class="progress-container" style="margin-top: 15px;">
                        <div class="progress-bar progress-client-${i} loading"></div>
                    </div>
                `;
                clientGrid.appendChild(clientCard);
            }
            
            // Clear previous logs
            trainingLogs.innerHTML = '';
            
            // Add initial logs
            addTrainingLog(`Starting training with model: ${model}`);
            addTrainingLog(`Dataset: ${dataset}, Epochs: ${epochs}, Batch Size: ${document.getElementById('batch-size').value}`);
            addTrainingLog("Distributing model to clients...");
            
            // Simulate training progress
            let currentEpoch = 1;
            let step = 1;
            const totalSteps = 10;
            
            const interval = setInterval(() => {
                if (currentEpoch > epochs) {
                    clearInterval(interval);
                    completeTraining();
                    return;
                }
                
                if (step > totalSteps) {
                    currentEpoch++;
                    step = 1;
                    if (currentEpoch <= epochs) {
                        addTrainingLog(`Completed Epoch ${currentEpoch-1}/${epochs}`);
                        addTrainingLog(`Starting Epoch ${currentEpoch}/${epochs}`);
                        
                        // Update client cards
                        document.querySelectorAll('.client-details').forEach(details => {
                            const progressElement = details.querySelector('span:last-child');
                            if (progressElement.textContent.includes('Progress')) {
                                progressElement.textContent = `Epoch ${currentEpoch}/${epochs}`;
                            }
                        });
                        
                        // Reset progress bars
                        document.querySelectorAll('.progress-bar').forEach(bar => {
                            bar.style.width = '0';
                            // Force reflow
                            void bar.offsetWidth;
                            bar.classList.add('loading');
                        });
                    }
                    return;
                }
                
                // Log training step
                const loss1 = (3.0 - (0.2 * currentEpoch) - (0.05 * step) + (Math.random() * 0.1)).toFixed(4);
                const loss2 = (2.8 - (0.2 * currentEpoch) - (0.05 * step) + (Math.random() * 0.1)).toFixed(4);
                
                addTrainingLog(`Epoch ${currentEpoch}/${epochs} - Step ${step}/${totalSteps} - Client 1 Loss: ${loss1} - Client 2 Loss: ${loss2}`);
                
                step++;
            }, 1000);
        }

        function addTrainingLog(text) {
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <span class="log-time">${timeString}</span>
                <span class="log-info">INFO</span> ${text}
            `;
            
            trainingLogs.appendChild(logEntry);
            trainingLogs.scrollTop = trainingLogs.scrollHeight;
        }

        function completeTraining() {
            // Update client cards
            document.querySelectorAll('.client-card .status-badge').forEach(badge => {
                badge.className = 'status-badge status-online';
                badge.innerHTML = '<span class="pulse"></span> Complete';
            });
            
            // Log completion
            addTrainingLog("Training completed successfully!");
            addTrainingLog("Final validation accuracy: 94.8%");
            addTrainingLog("Model saved to ./trained_models/medical_model");
            
            // Show success notification
            showNotification('success', 'Training Complete', 'Your distributed medical model has been successfully trained and is ready for inference.');
            
            // Add option to start inference
            const completeMessage = document.createElement('div');
            completeMessage.className = 'form-group';
            completeMessage.style.marginTop = '20px';
            completeMessage.style.textAlign = 'center';
            completeMessage.innerHTML = `
                <p style="margin-bottom: 15px;">Your model is now trained and ready to use for medical questions.</p>
                <button class="btn btn-primary" id="go-to-inference">
                    <i class="fas fa-comment-medical"></i> Start Medical Q&A
                </button>
            `;
            
            trainingLogs.parentNode.appendChild(completeMessage);
            
            document.getElementById('go-to-inference').addEventListener('click', function() {
                document.getElementById('nav-inference').click();
            });
        }

        trainingForm.addEventListener('submit', function(e) {
            e.preventDefault();
            simulateTraining();
        });

        // Notification system
        function showNotification(type, title, message) {
            // Set notification type
            notification.className = 'notification';
            notification.classList.add(`notification-${type}`);
            
            // Set icon
            const iconElement = notification.querySelector('.notification-icon i');
            if (type === 'success') {
                iconElement.className = 'fas fa-check-circle';
            } else if (type === 'error') {
                iconElement.className = 'fas fa-exclamation-circle';
            } else if (type === 'warning') {
                iconElement.className = 'fas fa-exclamation-triangle';
            } else {
                iconElement.className = 'fas fa-info-circle';
            }
            
            // Set content
            notification.querySelector('.notification-title').textContent = title;
            notification.querySelector('.notification-message').textContent = message;
            
            // Show notification
            notification.classList.add('show');
            
            // Auto hide after 5 seconds
            setTimeout(() => {
                notification.classList.remove('show');
            }, 5000);
        }

        notificationClose.addEventListener('click', function() {
            notification.classList.remove('show');
        });

        // Simulate adding logs periodically
        let logCount = 0;
        setInterval(() => {
            const logTypes = ['info', 'info', 'info', 'warn', 'error'];
            const logType = logTypes[Math.floor(Math.random() * (logCount % 10 === 0 ? 5 : 3))]; // Occasional warnings/errors
            
            const logMessages = [
                'Health check passed for all clients',
                'Server memory usage: stable',
                'Client 1 GPU temperature: 65°C',
                'Client 2 GPU temperature: 61°C',
                'Network latency: 12ms',
                'Backup completed successfully',
                'Model checkpoint saved'
            ];
            
            const warnMessages = [
                'High GPU temperature detected on Client 1: 78°C',
                'Network latency spike detected: 120ms',
                'Client 2 memory usage approaching limit: 87%',
                'Disk space running low on server: 92% used'
            ];
            
            const errorMessages = [
                'Connection timeout with Client 2, retrying...',
                'Failed to save model checkpoint, disk full',
                'CUDA error on Client 1, attempting recovery',
                'Memory allocation failed on Client 2'
            ];
            
            let logMessage;
            if (logType === 'warn') {
                logMessage = warnMessages[Math.floor(Math.random() * warnMessages.length)];
            } else if (logType === 'error') {
                logMessage = errorMessages[Math.floor(Math.random() * errorMessages.length)];
            } else {
                logMessage = logMessages[Math.floor(Math.random() * logMessages.length)];
            }
            
            const now = new Date();
            const hours = now.getHours().toString().padStart(2, '0');
            const minutes = now.getMinutes().toString().padStart(2, '0');
            const seconds = now.getSeconds().toString().padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            const logEntry = document.createElement('div');
            logEntry.className = 'log-entry';
            logEntry.innerHTML = `
                <span class="log-time">${timeString}</span>
                <span class="log-${logType}">${logType.toUpperCase()}</span> ${logMessage}
            `;
            
            systemLogs.appendChild(logEntry);
            
            // Keep only the latest 100 logs
            if (systemLogs.childNodes.length > 100) {
                systemLogs.removeChild(systemLogs.firstChild);
            }
            
            logCount++;
        }, 8000);

        // Document loads with dashboard view by default
        document.getElementById('nav-dashboard').click();
    </script>
</body>
</html>